class MundoLimpioTheme{constructor(){this.header=null,this.mobileMenuToggle=null,this.mobileMenu=null,this.backToTopButton=null,this.lastScrollY=0,this.isScrollingUp=!1,this.scrollThreshold=100,this.isMobileMenuOpen=!1,this.init()}init(){console.log("ðŸŒ¿ Mundo Limpio Theme - Inicializado"),this.bindElements(),this.bindEvents(),this.initStickyHeader(),this.initMobileMenu(),this.initBackToTop(),this.initScrollAnimations(),this.initSmoothScroll(),this.initCounters(),this.initNewsletterForm(),this.throttledScrollHandler=this.throttle(this.handleScroll.bind(this),16),this.throttledResizeHandler=this.throttle(this.handleResize.bind(this),250)}bindElements(){this.header=document.getElementById("mundo-header"),this.mobileMenuToggle=document.getElementById("mobile-menu-toggle"),this.mobileMenu=document.getElementById("mobile-menu"),this.backToTopButton=document.getElementById("back-to-top")}bindEvents(){window.addEventListener("scroll",this.throttledScrollHandler,{passive:!0}),window.addEventListener("resize",this.throttledResizeHandler),this.mobileMenuToggle&&this.mobileMenuToggle.addEventListener("click",this.toggleMobileMenu.bind(this)),this.backToTopButton&&this.backToTopButton.addEventListener("click",this.scrollToTop.bind(this)),document.addEventListener("click",e=>{this.isMobileMenuOpen&&this.mobileMenu&&!this.mobileMenu.contains(e.target)&&this.mobileMenuToggle&&!this.mobileMenuToggle.contains(e.target)&&this.closeMobileMenu()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.isMobileMenuOpen&&this.closeMobileMenu()}),window.addEventListener("resize",()=>{window.innerWidth>=1024&&this.isMobileMenuOpen&&this.closeMobileMenu()})}initStickyHeader(){this.header&&(this.header.style.transition="all 0.3s ease")}handleScroll(){const e=window.scrollY;this.isScrollingUp=e<this.lastScrollY,this.handleStickyHeader(e),this.handleBackToTopVisibility(e),this.handleScrollAnimations(),this.lastScrollY=e}handleStickyHeader(e){this.header&&(e>this.scrollThreshold?(this.header.classList.add("scrolled"),this.isScrollingUp?(this.header.style.transform="translateY(0)",this.header.classList.remove("hidden-header")):(this.header.style.transform="translateY(-100%)",this.header.classList.add("hidden-header"))):(this.header.style.transform="translateY(0)",this.header.classList.remove("scrolled","hidden-header")))}handleBackToTopVisibility(e){this.backToTopButton&&(e>500?(this.backToTopButton.classList.remove("translate-y-16","opacity-0"),this.backToTopButton.classList.add("translate-y-0","opacity-100")):(this.backToTopButton.classList.add("translate-y-16","opacity-0"),this.backToTopButton.classList.remove("translate-y-0","opacity-100")))}initMobileMenu(){this.mobileMenu&&(this.mobileMenu.style.transform="translateY(-100%)",this.mobileMenu.style.opacity="0",this.mobileMenu.style.visibility="hidden")}toggleMobileMenu(){this.isMobileMenuOpen?this.closeMobileMenu():this.openMobileMenu()}openMobileMenu(){if(!this.mobileMenu||!this.mobileMenuToggle)return;this.isMobileMenuOpen=!0;const e=this.mobileMenuToggle.querySelector("i");e&&(e.textContent="close"),this.mobileMenu.classList.add("open"),this.mobileMenu.style.visibility="visible",this.mobileMenu.style.transform="translateY(0)",this.mobileMenu.style.opacity="1",document.body.style.overflow="hidden";this.mobileMenu.querySelectorAll(".mobile-nav-link").forEach((e,t)=>{setTimeout(()=>{e.classList.add("animate-fade-in-left")},100*t)}),console.log("ðŸ“± MenÃº mÃ³vil abierto")}closeMobileMenu(){if(!this.mobileMenu||!this.mobileMenuToggle)return;this.isMobileMenuOpen=!1;const e=this.mobileMenuToggle.querySelector("i");e&&(e.textContent="menu"),this.mobileMenu.classList.remove("open"),this.mobileMenu.style.transform="translateY(-100%)",this.mobileMenu.style.opacity="0",setTimeout(()=>{this.isMobileMenuOpen||(this.mobileMenu.style.visibility="hidden")},300),document.body.style.overflow="";this.mobileMenu.querySelectorAll(".mobile-nav-link").forEach(e=>{e.classList.remove("animate-fade-in-left")}),console.log("ðŸ“± MenÃº mÃ³vil cerrado")}initBackToTop(){this.backToTopButton&&this.backToTopButton.classList.add("translate-y-16","opacity-0")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}initScrollAnimations(){const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.classList.add("animate-fade-in-up"),e.target.classList.remove("opacity-0","translate-y-8"))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll("[data-scroll-animation]").forEach(t=>{t.classList.add("opacity-0","translate-y-8"),e.observe(t)});document.querySelectorAll("section").forEach(t=>{e.observe(t)})}handleScrollAnimations(){const e=-.5*window.scrollY;document.querySelectorAll(".hero-decorations > div").forEach((t,i)=>{const o=.3*(i+1);t.style.transform=`translateY(${e*o}px)`})}initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const i=e.getAttribute("href");if("#"===i)return;const o=document.querySelector(i);if(o){t.preventDefault();const e=this.header?this.header.offsetHeight:80,i=o.offsetTop-e-20;window.scrollTo({top:i,behavior:"smooth"}),this.isMobileMenuOpen&&this.closeMobileMenu()}})})}initCounters(){const e=document.querySelectorAll("[data-counter]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target,o=parseInt(i.getAttribute("data-counter"));this.animateCounter(i,o,2e3),t.unobserve(i)}})});e.forEach(e=>{t.observe(e)})}animateCounter(e,t,i=2e3){let o=0;const n=t/(i/16),s=setInterval(()=>{o+=n,e.textContent=Math.floor(o),o>=t&&(e.textContent=t,clearInterval(s))},16)}initNewsletterForm(){const e=document.getElementById("newsletter-form");e&&e.addEventListener("submit",e=>{e.preventDefault();const t=e.target.querySelector('input[type="email"]').value;this.validateEmail(t)?(this.showNotification("Â¡Gracias por suscribirte a nuestro newsletter!","success"),e.target.reset()):this.showNotification("Por favor, ingresa un email vÃ¡lido.","error")})}handleResize(){window.innerWidth>=1024&&this.isMobileMenuOpen&&this.closeMobileMenu(),this.handleScroll()}validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}showNotification(e,t="info",i=5e3){const o=document.createElement("div");o.className="fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg text-white transform translate-x-full transition-transform duration-300 "+("success"===t?"bg-green-600":"error"===t?"bg-red-600":"warning"===t?"bg-yellow-600":"bg-blue-600"),o.innerHTML=`\n            <div class="flex items-center">\n                <i class="material-icons mr-2">${"success"===t?"check_circle":"error"===t?"error":"warning"===t?"warning":"info"}</i>\n                <span>${e}</span>\n                <button class="ml-4 text-white hover:text-gray-200 transition-colors" onclick="this.parentElement.parentElement.remove()">\n                    <i class="material-icons text-sm">close</i>\n                </button>\n            </div>\n        `,document.body.appendChild(o),setTimeout(()=>{o.classList.remove("translate-x-full")},100),setTimeout(()=>{o.classList.add("translate-x-full"),setTimeout(()=>{o.parentElement&&o.remove()},300)},i)}throttle(e,t){let i;return function(){const o=arguments,n=this;i||(e.apply(n,o),i=!0,setTimeout(()=>i=!1,t))}}debounce(e,t,i){let o;return function(){const n=this,s=arguments,l=i&&!o;clearTimeout(o),o=setTimeout(function(){o=null,i||e.apply(n,s)},t),l&&e.apply(n,s)}}}const MundoLimpioUtils={validateEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),formatPrice:(e,t="$")=>`${t}${parseFloat(e).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}`,animateCounter(e,t,i=2e3){let o=0;const n=t/(i/16),s=setInterval(()=>{o+=n,e.textContent=Math.floor(o),o>=t&&(e.textContent=t,clearInterval(s))},16)},getElementPosition(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}},isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}};document.addEventListener("DOMContentLoaded",()=>{const e=new MundoLimpioTheme;window.MundoLimpioTheme=e,window.MundoLimpioUtils=MundoLimpioUtils,setTimeout(()=>{e.showNotification("ðŸŒ¿ Mundo Limpio Theme cargado exitosamente","success")},1e3)}),document.addEventListener("visibilitychange",()=>{const e=document.title;document.hidden?document.title="Â¡Vuelve pronto! ðŸŒ¿ - Mundo Limpio":document.title=e}),("localhost"===window.location.hostname||window.location.hostname.includes("dev"))&&window.addEventListener("load",()=>{console.log("ðŸš€ Mundo Limpio Theme - Performance:",{"DOM Content Loaded":performance.getEntriesByType("navigation")[0].domContentLoadedEventEnd,"Load Complete":performance.getEntriesByType("navigation")[0].loadEventEnd,"First Paint":performance.getEntriesByName("first-paint")[0]?.startTime||"N/A","First Contentful Paint":performance.getEntriesByName("first-contentful-paint")[0]?.startTime||"N/A"})});